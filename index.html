<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Faire du Javascript &mdash; Qui ait la classe</title>

    <meta name="description" content="Une présentation sur la qualité de code Javascript">
    <meta name="author" content="Rémy Sanchez">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/night.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">
    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section>
            <h1>Faire du Javascript</h1>

            <h3>Qui ait la classe</h3>

            <p>
                <small>
                    Par <a href="http://hyperthese.net/">Rémy Sanchez</a> /
                    <a href="http://twitter.com/Xowap">@Xowap</a>
                </small>
            </p>
        </section>

        <section>
            <h2>Avertissement</h2>

            <p>Cette conférence peut heurter certaines sensibilités</p  >
            <p>Mes avis sont engagés</p>
            <p>Mais cela n'engage que moi</p>
        </section>

        <section>
            <h2>Moi</h2>

            <ul>
                <li>Rémy Sanchez</li>
                <li>Co-fondateur de <span style="font-weight: bold; color: #fabb00;">Good Morning Planet</span></li>
                <li>
                    Sur les réseaux sociaux&nbsp;:
                    <ul>
                        <li><strong>Twitter</strong> <a href="https://twitter.com/Xowap" target="_blank">@Xowap</a></li>
                        <li><strong>GitHub</strong> <a href="https://github.com/Xowap" target="_blank">github.com/Xowap</a></li>
                        <li><strong>Blog</strong> <a href="http://hyperthese.net/" target="_blank">hyperthese.net</a></li>
                    </ul>
                </li>
            </ul>
        </section>

        <section>
            <h2>Au programme</h2>

            <ol>
                <li>Javascript &mdash; Le Langage Incompris</li>
                <li>La Syntaxe</li>
                <li>Les Design Patterns</li>
                <li>Les Outils</li>
                <li>La Documentation</li>
            </ol>
        </section>

        <section>
            <section>
                <h2>Javascript</h2>
                <h3>Le Langage Incompris</h3>
            </section>

            <section>
                <h2>Un peu de maths</h2>

                <pre class="fragment"><code>> '5' - 3</code></pre>
                <pre class="fragment"><code>2</code></pre>
                <pre class="fragment"><code>> '5' + 3</code></pre>
                <pre class="fragment"><code>'53'</code></pre>
                <pre class="fragment"><code>> '5' + + '5'</code></pre>
                <pre class="fragment"><code>55</code></pre>
            </section>
        </section>

        <section>
            <h2>Javascript comme Java</h2>

            <ul>
                <li>Nom initial de Javascript: LiveScript</li>
                <li>
                    Origine différente
                    <ul>
                        <li><strong>Java</strong> = Sun Microsystems</li>
                        <li><strong>Javascript</strong> = Netscape</li>
                    </ul>
                </li>
                <li>Javascript triomphe où les applets Java ont échoué</li>
            </ul>
        </section>

        <section>
            <h2>Descendance du C</h2>

            <ul>
                <li>Syntaxe comme le C</li>
                <li>Concepts du Lisp</li>
            </ul>
        </section>

        <section>
            <h2>Mal conçu</h2>

            <ul>
                <li>Oui</li>
                <li>Mais ça change&nbsp;: ES5, ES6</li>
            </ul>
        </section>

        <section>
            <h2>Langage du dimanche</h2>

            <ul>
                <li>Très pratique par les amateurs</li>
                <li>Mauvaise réputation chez les développeurs</li>
                <li>Néamoins apte au développement professionnel</li>
            </ul>
        </section>

        <section>
            <h2>Programmation objet bizarre</h2>

            <ul>
                <li>Des objets mais pas des classes</li>
                <li>Concepts différents de Java ou C++</li>
                <li>Design patterns différents</li>
            </ul>
        </section>

        <section>
            <h2>Mauvaise Documentation</h2>

            <ul>
                <li>Le standard est infâme</li>
                <li>Beaucoup de livres sont mauvais</li>
                <li>Ne parlons pas des tutos</li>
            </ul>
        </section>

        <section>
            <section data-background-video="video/epic_citadel.mp4">
                <h2>Juste bon à faire tomber de la neige</h2>
                <h3>(version année 2000)</h3>

                <ul>
                    <li>reveal.js</li>
                    <li>asm.js</li>
                    <li>Emscripten</li>
                    <li>Shumway</li>
                    <li>Fayde</li>
                    <li>jslinux</li>
                </ul>
            </section>

            <section>
                <h2>jslinux</h2>
                <!--<iframe src="http://bellard.org/jslinux/" frameborder="0" class="stretch"></iframe>-->
            </section>
        </section>

        <section>
            <h2>Je n'aime pas Javascript</h2>

            <ul>
                <li>
                    Mais il est suffisant
                    <ul>
                        <li>Turing-complet</li>
                        <li>Toujours mieux que Brainfuck</li>
                    </ul>
                </li>
                <li>Et il est partout</li>
                <li>Et pas si mauvais</li>
                <li>On passe plus de temps à réfléchir qu'à coder</li>
            </ul>
        </section>

        <section data-background="img/terminator.jpg">
            <h2>Javascript Vous Déteste</h2>
            <h3 class="fragment">Ne soyez pas ridicules</h3>
        </section>

        <section>
            <section>
                <h2>La Syntaxe</h2>
            </section>

            <section>
                <h2>Encore des maths</h2>

                <pre class="fragment"><code>> 'foo' + + 'foo'</code></pre>
                <pre class="fragment"><code>'fooNaN'</code></pre>
                <pre class="fragment"><code>> '5' + - '2'</code></pre>
                <pre class="fragment"><code>'5-2'</code></pre>
                <pre class="fragment"><code>> '5' + - + - - + - - + + - + - + - + - - - '-2'</code></pre>
                <pre class="fragment"><code>'52'</code></pre>
            </section>
        </section>

        <section>
            <section>
                <h2>De l'importance du formattage</h2>
            </section>

            <section>
                <h2>Que fait ce code&nbsp;?</h2>

                <pre><code data-trim>
function get( num ) {
        return num != null ?

                // Return just the one element from the set
                ( num < 0 ? this[ num + this.length ] : this[ num ] ) :

                // Return all the elements in a clean array
                slice.call( this );
}
                </code></pre>
            </section>

            <section>
                <h2>Et celui-là&nbsp;?</h2>

                <pre><code data-trim>
function get(num) {
    if (num !== null) {
        if (num < 0) {
            return this[num + this.length];
        }

        return this[num];
    }

    return slice.call(this);
}
                </code></pre>
            </section>

            <section>
                <h2>Style corporate</h2>

                <p>Si tout le monde utilise le même style&nbsp;:</p>

                <ul>
                    <li>Repères visuels</li>
                    <li>Prédictibilité</li>
                </ul>
            </section>

            <section data-background="img/punchcard.jpg">
                <h2>Mythe de l'économie de caractères</h2>

                <ul>
                    <li>Date des cartes perforées</li>
                    <li>Aucune médaille à gagner</li>
                    <li>Fait du mal au compilateur</li>
                </ul>
            </section>

            <section>
                <h2>Mythe de la performance</h2>

                <img class="stretch" src="img/perfgraph.svg" alt=""/>
            </section>

            <section>
                <h2>Complexité algorithmique</h2>

                <div id="algo-complexity" class="stretch"></div>
            </section>
            
            <section>
                <h2>Démo Optimisation</h2>

                <p>
                    Démo sur <a href="http://codepen.io/Xowap/pen/NPYNay?editors=101" target="_blank">CodePen</a>
                </p>
            </section>
        </section>

        <section>
            <section>
                <h2>Comment choisir&nbsp;?</h2>
            </section>

            <section data-background="img/trex.gif">
                <h2>Pouvez-vous croire votre cerveau&nbsp;?</h2>

                <h3 class="fragment">Pas toujours</h3>
            </section>

            <section>
                <h2>Préférez les syntaxes sans confusion</h2>

                <pre><code data-trim class="javascript">
// Returns undefined
return
{
    ok: false
}

// Returns what's expected
return {
    ok: true
}
                </code></pre>
            </section>

            <section>
                <h2>«&nbsp;Ça n'arrive presque jamais&nbsp;»</h2>
                <h3 class="fragment">C'est une autre manière de dire que ça arrive</h3>
            </section>

            <section>
                <h2>Un bon style fait de meilleurs programmes</h2>
                <h3>Ce n'est pas une question d'expression personnelle</h3>
            </section>

            <section>
                <h2>LESROMAINSPARLAIENTLATIN</h2>
                <h3 class="fragment">Mais les copistes ont inventé les minuscules et les espaces</h3>
            </section>

            <section>
                <h2>Faut-il un espace&nbsp;?</h2>
                <h3>Utilisons-le pour repérer les fonctions</h3>

                <pre><code data-trim class="javascript">
// Good
var stuff = function () { ...
if (true) { ...
function foo(foo, bar) { ...
foo(arg1, arg2);

// Bad
foo ();
return(a+b);
if(a ===b) { ...
function(x) {...
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Quelqu'un a-t-il déjà choisi pour moi ?</h2>
                <h3>Et est-ce que je peux vérifier mon code automatiquement ?</h3>
            </section>

            <section data-background="img/magical.jpg">
                <h1>jslint</h1>
                <h3>Tadjaaaaa&nbsp;!</h3>
            </section>

            <section data-background="img/goodparts.jpg">
                <h2>jslint</h2>

                <ul>
                    <li>Limiter aux bons côtés</li>
                    <li>Très strict</li>
                    <li>Il va vous vexer</li>
                    <li>Syndrome des options désactivées</li>
                </ul>
            </section>

            <section>
                <h2>Exemple</h2>

                <iframe src="http://www.jslint.com/" frameborder="0" class="stretch"></iframe>
            </section>

            <section>
                <h2>Utiliser jslint en vrai</h2>

                <ul>
                    <li>L'interface web est peu pratique</li>
                    <li>Il existe un outil ligne de commande</li>
                    <li>De nombreux IDE intègrent directement jslint</li>
                </ul>
            </section>

            <section>
                <h2>Mais jslint, c'est pour les extrêmistes</h2>

                <ul>
                    <li>Oui</li>
                    <li>Il faut être extrêmiste du code</li>
                    <li>Moins de syntaxe = Moins de prise de tête</li>
                </ul>
            </section>

            <section>
                <h2>use strict</h2>

                <ul>
                    <li>Ajout d'ES5</li>
                    <li>Activé avec une chaîne <code>'use strict';</code></li>
                    <li>Quand on se trompe, ça plante</li>
                    <li>Compatible avec ES3</li>
                    <li>Et d'autres changements</li>
                </ul>
            </section>

            <section>
                <h2>stupidity</h2>

                <ul>
                    <li>Interdiction des méthodes bloquantes</li>
                    <li>Car bloque l'interface</li>
                </ul>
            </section>

            <section>
                <h2>inefficient subscripting</h2>

                <ul>
                    <li>Accès aux membres des objets</li>
                    <li><strong>Mauvais</strong>&nbsp;: <code>o['foo']</code></li>
                    <li><strong>Bon</strong>&nbsp;: <code>o.foo</code></li>
                    <li>Aide le compilateur</li>
                </ul>
            </section>

            <section>
                <h2>many vars per function</h2>

                <div>
                    <p>Piège&nbsp;!</p>

                    <pre><code data-trim>
function foo() {
    var a;

    for (var i = 0; i < 10; i += 1) {
        var b = i * 2;
        console.log(b);
    }
}
                    </code></pre>
                </div>

                <div class="fragment">
                    <p>Équivalent</p>

                    <pre><code data-trim>
function foo() {
    var a, b, i;

    for (i = 0; i < 10; i += 1) {
        b = i * 2;
        console.log(b);
    }
}
                    </code></pre>
                </div>
            </section>

            <section>
                <h2>messy white space</h2>

                <p>Syndrôme des copier/coller et des éditeurs mal configurés</p>

                <ul>
                    <li>Identation incohérente</li>
                    <li>Affichage variable selon l'IDE</li>
                    <li>Risque de diff dans un commit</li>
                    <li>Toute l'équipe doit avoir la mếme configuration
                        <ul>
                            <li>Taille d'une tabulation</li>
                            <li>Espaces vs. Tabulations</li>
                            <li>Effaçage des caractères blanc en fin de ligne</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section>
                <h2>unfiltered <code>for in</code></h2>

                <p>Problème avec <code>for (x in myVar)</code></p>

                <ul>
                    <li>Devrait lister les propriétés de <code>myVar</code></li>
                    <li>Problème en cas de hijack du prototype</li>
                    <li>Dans le doute, utiliser la méthode <code>hasOwnProperty()</code></li>
                </ul>

                <p>Mauvais&nbsp;:</p>

                    <pre><code data-trim>
for (x in myVar) {
    console.log(x);
}
                    </code></pre>

                <p>Bon&nbsp;:</p>

                    <pre><code data-trim>
for (x in myVar) {
    if (myVar.hasOwnProperty(x)) {
        console.log(x);
    }
}
                    </code></pre>
            </section>

            <section>
                <h2>uncapitalized constructors</h2>

                <pre><code data-trim>
function foo() {
    console.log('bar');
}

function Obj() {
    var self = this,
        foo;

    foo = function () {
        console.log('bar');
    };

    self.foo = foo;
}

obj = new Obj();
                </code></pre>

                <ul>
                    <li>Différencier fonction et constructeur</li>
                    <li>Pas de limitation par le langage</li>
                    <li>Usage d'une convention</li>
                </ul>
            </section>

            <section>
                <h2>dangling _ in identifiers</h2>

                <ul>
                    <li><code>this._privateProperty</code> est mauvais</li>
                    <li>D'autres moyens existent</li>
                    <li>Interdiction de cette convention for forcer les bons usages</li>
                    <li><em>cf</em> la section Design Patterns</li>
                </ul>
            </section>

            <section>
                <h2><code>++</code> et <code>--</code></h2>

                <ul>
                    <li><code>i+++j</code></li>
                    <li>La syntaxe est ambigue</li>
                    <li>Autant ne pas l'utiliser</li>
                    <li><strong>Mieux&nbsp;:</strong> <code>i += 1</code></li>
                </ul>
            </section>

            <section>
                <h2>continue</h2>

                <ul>
                    <li>Porte à confusion</li>
                    <li>Question performance, cf slide précédente</li>
                </ul>

                <pre><code data-trim class="javascript">
// Bad
while (someCondition) {
    // Do Stuff

    if (!shouldDo) {
        continue;
    }

    // Do Other Stuff
}

// Good
while (someCondition) {
    // Do Stuff

    if (shouldDo) {
        // Do Other Stuff
    }
}
                </code></pre>
            </section>

            <section>
                <h2>== and !=</h2>

                <pre><code data-trim class="javascript">
// Bad
if (1 == '1') {
    // Do Stuff
}

// Good
if (1 === parseInt('1', 10)) {
    // Do Stuff
}
                </code></pre>

                <ul>
                    <li>Cause bugs et failles de sécurité</li>
                    <li>Soyez sûrs de vous, utilisz <code>===</code></li>
                </ul>
            </section>

            <section>
                <h2>eval</h2>

                <ul>
                    <li>Il n'y a aucune raison d'utiliser <code>eval()</code></li>
                    <li>Il n'y a aucune raison d'utiliser <code>eval()</code></li>
                    <li>Non aucune.</li>
                    <li>eval() is evil!</li>
                </ul>
            </section>
        </section>

        <section>
            <h2>Les design patterns</h2>
        </section>

        <section>
            <h2>Manger à l'étranger</h2>
        </section>
    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script type="text/javascript"
        src="https://www.google.com/jsapi?autoload={
            'modules':[{
              'name':'visualization',
              'version':'1',
              'packages':['corechart']
            }]
          }"></script>

<script>
    (function () {
        var drawComplexityChart;

        drawComplexityChart = function () {
            var rows = [['n', 'O(n)', 'O(n²)']],
                data,
                i,
                chart,
                textStyle = {
                    fontSize: 24,
                    color: 'white'
                },
                options = {
                    backgroundColor: 'transparent',
                    legend: {
                        position: 'right',
                        textStyle: textStyle
                    },
                    hAxis: {
                        gridlines: {
                            count: 4,
                            color: 'transparent'
                        },
                        textStyle: textStyle
                    },
                    vAxis: {
                        gridlines: {
                            count: 5,
                            color: 'transparent'
                        },
                        textStyle: textStyle
                    },
                    series: {
                        0: {
                            lineWidth: 5
                        },
                        1: {
                            lineWidth: 5
                        }
                    }
                };

            for (i = 0; i <= 10; i += 1) {
                rows.push([i, i, Math.pow(i, 2)]);
            }

            data = google.visualization.arrayToDataTable(rows);

            chart = new google.visualization.LineChart(document.getElementById('algo-complexity'));
            chart.draw(data, options);
        };
        google.setOnLoadCallback(drawComplexityChart);
    }());
</script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: 'plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/highlight/highlight.js', async: true, condition: function () {
                return !!document.querySelector('pre code');
            }, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: 'plugin/zoom-js/zoom.js', async: true},
            {src: 'plugin/notes/notes.js', async: true}
        ]
    });

</script>

</body>
</html>
